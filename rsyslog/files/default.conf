{%- from "rsyslog/map.jinja" import client,server with context -%}
{%- for name,config in server.output.file.iteritems() %}
{% if config.owner is defined %}
$FileOwner: {{ config['owner'] }}
{% endif %}
{% if config.group is defined %}
$FileGroup: {{ config['group'] }}
{% endif %}
{% if config.createmode is defined %}
$FileCreateMode: "{{ config['createmode'] }}"
{% endif %}
{% if config.umask is defined %}
$Umask: "{{ config['umask'] }}"
{% endif %}
{{ config['filter'] }}     {% if config.sync == true %}-{% endif %}{{ name }}
{% endfor %}

{% if server.output.console is defined %}
{% for name,config in server.output.console.iteritems() %}
{{ config['filter'] }}      {{ config['action'] }}
{% endfor %}
{% endif %}

{% if server.output.remote is defined %}
{% for name,config in server.output.console.iteritems() %}
{{ config['filter'] }}      {{ config['action'] }}
{% endfor %}
{% endif %}
